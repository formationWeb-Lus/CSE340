<main class="register-container">
  <h1><%= title %></h1>

  <!-- Flash messages -->
  <% if (messages.notice) { %>
  <div class="notice">
    <%= messages.notice %>
  </div>
<% } %>

<% if (messages.error) { %>
  <div class="error">
    <%= messages.error %>
  </div>
<% } %>

  <!-- Formulaire d'inscription -->
  <form class="register-form" action="/account/register" method="post">
    <label for="account_firstname">First Name</label>
    <input type="text" id="account_firstname" name="account_firstname" required value="<%= account_firstname || '' %>">

    <label for="account_lastname">Last Name</label>
    <input type="text" id="account_lastname" name="account_lastname" required value="<%= account_lastname || '' %>">

    <label for="account_email">Email</label>
    <input type="email" id="account_email" name="account_email" required placeholder="Enter a valid email" value="<%= account_email || '' %>">

    <label for="account_password">Password</label>
    <input
      type="password"
      id="account_password"
      name="account_password"
      required
      pattern="^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[^a-zA-Z0-9])(?!.*\s).{12,}$"
      title="At least 12 chars, 1 uppercase, 1 lowercase, 1 number, 1 special character"
    >
    <!-- Bouton show/hide password -->
    <button type="button" id="togglePassword">Show Password</button>

    <div class="password-rules">
      Password must contain:
      <ul>
        <li>Minimum 12 characters At least 1 uppercase letter</li>
        <li>At least 1 lowercase letter least 1 number and least 1 special character</li>
      
      </ul>
    </div>

    <button type="submit">Register</button>
  </form>

  <p class="login-link">
    Already have an account? <a href="/account/login">Login here</a>
  </p>
</main>

<!-- JavaScript pour Show/Hide Password -->
<script>
  const togglePassword = document.getElementById('togglePassword');
  const passwordInput = document.getElementById('account_password');

  togglePassword.addEventListener('click', () => {
    if (passwordInput.type === 'password') {
      passwordInput.type = 'text';
      togglePassword.textContent = 'Hide Password';
    } else {
      passwordInput.type = 'password';
      togglePassword.textContent = 'Show Password';
    }
  });
</script>
